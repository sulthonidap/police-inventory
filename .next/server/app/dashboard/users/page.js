(()=>{var e={};e.id=3618,e.ids=[3618],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},81475:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>o,routeModule:()=>p,tree:()=>c});var r=a(3003),l=a(14293),t=a(66550),i=a.n(t),n=a(86979),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c=["",{children:["dashboard",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,36464)),"C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\dashboard\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,87563)),"C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,37973)),"C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,52075,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\dashboard\\users\\page.tsx"],h={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/dashboard/users/page",pathname:"/dashboard/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},64945:(e,s,a)=>{Promise.resolve().then(a.bind(a,94282))},30361:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(62881).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},94282:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var r=a(68819),l=a(17266),t=a(29752),i=a(91664),n=a(38443),d=a(41156),c=a(20968),o=a(41190),h=a(44794),p=a(29280),x=a(62881);let u=(0,x.Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var m=a(77506),j=a(88307),g=a(30361);let y=(0,x.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var v=a(98091),N=a(84097),w=a(5523);function f(){let[e,s]=(0,l.useState)([]),[a,x]=(0,l.useState)([]),[f,b]=(0,l.useState)([]),[P,k]=(0,l.useState)([]),[C,I]=(0,l.useState)([]),[S,A]=(0,l.useState)(!0),[E,L]=(0,l.useState)(!1),[R,D]=(0,l.useState)(!1),[_,M]=(0,l.useState)({isOpen:!1,type:null,userId:null,userName:null}),[F,Z]=(0,l.useState)({userId:null,type:null}),[z,Q]=(0,l.useState)({page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1}),[O,T]=(0,l.useState)(10),[G,B]=(0,l.useState)(""),[V,q]=(0,l.useState)("ALL"),[U,$]=(0,l.useState)("ALL"),[H,K]=(0,l.useState)("ALL"),[Y,J]=(0,l.useState)("ALL"),[X,W]=(0,l.useState)({nrp:"",name:"",email:"",password:"",role:"",poldaId:"",polresId:""}),{toast:ee}=(0,N.pm)(),es=async()=>{try{let e=new URLSearchParams({page:z.page.toString(),limit:O.toString(),...G&&{search:G},...V&&"ALL"!==V&&{status:V},...U&&"ALL"!==U&&{role:U}}),a=await fetch(`/api/users?${e}`),r=await a.json(),l=Array.isArray(r?.users)?r.users:Array.isArray(r)?r:[];"ALL"!==H&&(l=l.filter(e=>e.polres?.polda.name===H)),"ALL"!==Y&&(l=l.filter(e=>e.polres?.id===Y)),r?.pagination?(s(l),Q({...r.pagination,total:l.length,totalPages:Math.max(1,Math.ceil(l.length/O))})):(s(l),Q({page:1,limit:O,total:l.length,totalPages:Math.max(1,Math.ceil(l.length/O)),hasNext:!1,hasPrev:!1}))}catch(e){console.error("Error fetching users:",e),ee({variant:"destructive",title:"Error",description:"Gagal memuat data pengguna"})}finally{A(!1)}},ea=async e=>{e.preventDefault(),D(!0);try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(e.ok)L(!1),W({nrp:"",name:"",email:"",password:"",role:"",poldaId:"",polresId:""}),es(),window.dispatchEvent(new CustomEvent("refreshPendingCount")),ee({variant:"success",title:"Berhasil!",description:"Pengguna baru berhasil ditambahkan"});else{let s=await e.json();ee({variant:"destructive",title:"Error",description:s.message||"Gagal menambahkan pengguna"})}}catch(e){console.error("Error creating user:",e),ee({variant:"destructive",title:"Error",description:"Terjadi kesalahan saat menambah pengguna"})}finally{D(!1)}},er=async e=>{Z({userId:e,type:"approve"});try{let s=await fetch(`/api/users/${e}/approve`,{method:"PATCH"});if(s.ok)await s.json(),es(),window.dispatchEvent(new CustomEvent("refreshPendingCount")),ee({variant:"success",title:"Berhasil!",description:"Pengguna berhasil disetujui"});else{let e=await s.json();ee({variant:"destructive",title:"Error",description:e.error||"Gagal menyetujui pengguna"})}}catch(e){console.error("Error approving user:",e),ee({variant:"destructive",title:"Error",description:"Gagal menyetujui pengguna"})}finally{Z({userId:null,type:null}),ei()}},el=async e=>{Z({userId:e,type:"reject"});try{let s=await fetch(`/api/users/${e}/reject`,{method:"PATCH"});if(s.ok)await s.json(),es(),window.dispatchEvent(new CustomEvent("refreshPendingCount")),ee({variant:"warning",title:"Berhasil!",description:"Pengguna berhasil ditolak"});else{let e=await s.json();ee({variant:"destructive",title:"Error",description:e.error||"Gagal menolak pengguna"})}}catch(e){console.error("Error rejecting user:",e),ee({variant:"destructive",title:"Error",description:"Gagal menolak pengguna"})}finally{Z({userId:null,type:null}),ei()}},et=(e,s,a)=>{M({isOpen:!0,type:e,userId:s,userName:a})},ei=()=>{M({isOpen:!1,type:null,userId:null,userName:null})},en=async()=>{_.userId&&_.type&&("approve"===_.type?await er(_.userId):"reject"===_.type?await el(_.userId):"delete"===_.type?await ec(_.userId):"reset"===_.type&&await ed(_.userId))},ed=async e=>{Z({userId:e,type:"reset"});try{let s=await fetch(`/api/users/${e}/reset-password`,{method:"PATCH"}),a=await s.json();if(s.ok){let e=a.password;ee({variant:"success",title:"Password direset",description:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"Password baru:"}),(0,r.jsx)("code",{className:"px-1 py-0.5 bg-white/70 rounded text-gray-900",children:e}),(0,r.jsx)(i.z,{type:"button",onClick:()=>navigator.clipboard.writeText(e),className:"h-7 px-2 text-xs",children:"Copy"})]})})}else ee({variant:"destructive",title:"Error",description:a.error||"Gagal reset password"})}catch(e){ee({variant:"destructive",title:"Error",description:"Gagal reset password"})}finally{Z({userId:null,type:null}),ei()}},ec=async e=>{Z({userId:e,type:"delete"});try{let s=await fetch(`/api/users/${e}`,{method:"DELETE"});if(s.ok)es(),ee({variant:"success",title:"Berhasil!",description:"Pengguna berhasil dihapus"});else{let e=await s.json();ee({variant:"destructive",title:"Error",description:e.error||"Gagal menghapus pengguna"})}}catch(e){console.error("Error deleting user:",e),ee({variant:"destructive",title:"Error",description:"Gagal menghapus pengguna"})}finally{Z({userId:null,type:null}),ei()}},eo=e=>{switch(e){case"APPROVED":return(0,r.jsx)(n.C,{className:"bg-green-100 text-green-800",children:"Disetujui"});case"PENDING":return(0,r.jsx)(n.C,{className:"bg-yellow-100 text-yellow-800",children:"Menunggu Approval"});case"REJECTED":return(0,r.jsx)(n.C,{className:"bg-red-100 text-red-800",children:"Ditolak"});default:return(0,r.jsx)(n.C,{variant:"secondary",children:e})}},eh=e=>(0,r.jsx)(n.C,{className:{ADMIN:"bg-purple-100 text-purple-800",KORLANTAS:"bg-blue-100 text-blue-800",POLDA:"bg-indigo-100 text-indigo-800",POLRES:"bg-cyan-100 text-cyan-800",USER:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-800",children:e}),ep=e=>{Q(s=>({...s,page:e}))},ex=e=>{B(e),Q(e=>({...e,page:1}))};return S?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"text-lg",children:"Memuat data pengguna..."})}):(0,r.jsxs)("div",{className:"space-y-4 lg:space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Manajemen Pengguna"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Kelola data pengguna sistem"})]}),(0,r.jsxs)(c.Vq,{open:E,onOpenChange:L,children:[(0,r.jsx)(c.hg,{asChild:!0,children:(0,r.jsxs)(i.z,{className:"w-full sm:w-auto",children:[(0,r.jsx)(u,{className:"mr-2 h-4 w-4"}),"Tambah Pengguna"]})}),(0,r.jsxs)(c.cZ,{className:"sm:max-w-[480px] max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(c.fK,{children:(0,r.jsx)(c.$N,{children:"Tambah Pengguna Baru"})}),(0,r.jsxs)("form",{onSubmit:ea,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"nrp",children:"NRP"}),(0,r.jsx)(o.I,{id:"nrp",value:X.nrp,onChange:e=>W({...X,nrp:e.target.value}),placeholder:"Masukkan NRP",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"name",children:"Nama Lengkap"}),(0,r.jsx)(o.I,{id:"name",value:X.name,onChange:e=>W({...X,name:e.target.value}),placeholder:"Masukkan nama",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"email",children:"Email"}),(0,r.jsx)(o.I,{id:"email",type:"email",value:X.email,onChange:e=>W({...X,email:e.target.value}),placeholder:"Masukkan email",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"password",children:"Password"}),(0,r.jsx)(o.I,{id:"password",type:"password",value:X.password,onChange:e=>W({...X,password:e.target.value}),placeholder:"Masukkan password",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"role",children:"Role"}),(0,r.jsxs)(p.Ph,{value:X.role,onValueChange:e=>W({...X,role:e,poldaId:"POLDA"===e||"USER"===e?X.poldaId:"",polresId:"POLRES"===e||"USER"===e?X.polresId:""}),children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:"Pilih role"})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"USER",children:"User"}),(0,r.jsx)(p.Ql,{value:"POLRES",children:"Polres"}),(0,r.jsx)(p.Ql,{value:"POLDA",children:"Polda"}),(0,r.jsx)(p.Ql,{value:"KORLANTAS",children:"Korlantas"}),(0,r.jsx)(p.Ql,{value:"ADMIN",children:"Admin"})]})]})]}),"POLDA"===X.role&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"polda",children:"Polda"}),(0,r.jsxs)(p.Ph,{value:X.poldaId,onValueChange:e=>W({...X,poldaId:e}),children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:"Pilih Polda"})}),(0,r.jsx)(p.Bw,{children:f.map(e=>(0,r.jsx)(p.Ql,{value:e.id,children:e.name},e.id))})]})]})]}),"USER"===X.role&&(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"polda",children:"Polda"}),(0,r.jsxs)(p.Ph,{value:X.poldaId,onValueChange:e=>W({...X,poldaId:e}),children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:"Pilih Polda"})}),(0,r.jsx)(p.Bw,{children:f.map(e=>(0,r.jsx)(p.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"polres",children:"Polres"}),(0,r.jsxs)(p.Ph,{value:X.polresId,onValueChange:e=>W({...X,polresId:e}),disabled:!X.poldaId,children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:X.poldaId?"Pilih Polres":"Pilih Polda dulu"})}),(0,r.jsx)(p.Bw,{children:C.map(e=>(0,r.jsx)(p.Ql,{value:e.id,children:e.name},e.id))})]})]})]}),"POLRES"===X.role&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"polres",children:"Polres"}),(0,r.jsxs)(p.Ph,{value:X.polresId,onValueChange:e=>W({...X,polresId:e}),children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:"Pilih Polres"})}),(0,r.jsx)(p.Bw,{children:a.map(e=>(0,r.jsxs)(p.Ql,{value:e.id,children:[e.name," - ",e.polda.name]},e.id))})]})]}),(0,r.jsxs)(c.cN,{children:[(0,r.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>L(!1),children:"Batal"}),(0,r.jsx)(i.z,{type:"submit",disabled:R,children:R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):"Simpan"})]})]})]})]})]}),(0,r.jsx)(t.Zb,{children:(0,r.jsx)(t.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 pt-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"search",children:"Cari"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)(o.I,{id:"search",placeholder:"Cari NRP, nama, email...",value:G,onChange:e=>ex(e.target.value),className:"pl-10"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"status",children:"Status"}),(0,r.jsxs)(p.Ph,{value:V,onValueChange:e=>{q(e),Q(e=>({...e,page:1}))},children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:"Semua status"})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"ALL",children:"Semua status"}),(0,r.jsx)(p.Ql,{value:"PENDING",children:"Menunggu"}),(0,r.jsx)(p.Ql,{value:"APPROVED",children:"Disetujui"}),(0,r.jsx)(p.Ql,{value:"REJECTED",children:"Ditolak"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"role",children:"Role"}),(0,r.jsxs)(p.Ph,{value:U,onValueChange:e=>{$(e),Q(e=>({...e,page:1}))},children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:"Semua role"})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"ALL",children:"Semua role"}),(0,r.jsx)(p.Ql,{value:"ADMIN",children:"Admin"}),(0,r.jsx)(p.Ql,{value:"KORLANTAS",children:"Korlantas"}),(0,r.jsx)(p.Ql,{value:"POLDA",children:"Polda"}),(0,r.jsx)(p.Ql,{value:"POLRES",children:"Polres"}),(0,r.jsx)(p.Ql,{value:"USER",children:"User"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"polda",children:"Polda"}),(0,r.jsxs)(p.Ph,{value:H,onValueChange:e=>{K(e),Q(e=>({...e,page:1}))},children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:"Semua Polda"})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"ALL",children:"Semua Polda"}),f.map(e=>(0,r.jsx)(p.Ql,{value:e.name,children:e.name},e.id))]})]})]}),"ALL"!==H&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"polres",children:"Polres"}),(0,r.jsxs)(p.Ph,{value:Y,onValueChange:e=>{J(e),Q(e=>({...e,page:1}))},children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:"Semua Polres"})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"ALL",children:"Semua Polres"}),P.map(e=>(0,r.jsx)(p.Ql,{value:e.id,children:e.name},e.id))]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{children:"Total Data"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:z.total})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h._,{htmlFor:"pageSize",children:"Data per Halaman"}),(0,r.jsxs)(p.Ph,{value:O.toString(),onValueChange:e=>{T(parseInt(e)),Q(e=>({...e,page:1}))},children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{placeholder:"Pilih jumlah data"})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"5",children:"5 data"}),(0,r.jsx)(p.Ql,{value:"10",children:"10 data"}),(0,r.jsx)(p.Ql,{value:"20",children:"20 data"}),(0,r.jsx)(p.Ql,{value:"50",children:"50 data"})]})]})]})]})})}),(0,r.jsx)("div",{className:"lg:hidden space-y-4",children:0===e.length?(0,r.jsx)(t.Zb,{children:(0,r.jsx)(t.aY,{className:"text-center py-8 text-gray-500",children:"Tidak ada data pengguna"})}):e.map(e=>(0,r.jsx)(t.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["NRP: ",e.nrp]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end space-y-1",children:[eh(e.role),eo(e.status)]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.polres?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.polres.name}),(0,r.jsx)("div",{className:"text-gray-500 text-xs",children:e.polres.polda.name})]}):"-"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Daftar: ",new Date(e.createdAt).toLocaleDateString("id-ID")]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 pt-2",children:["PENDING"===e.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-green-600 border-green-200 text-white hover:bg-green-100",onClick:()=>et("approve",e.id,e.name),disabled:F.userId===e.id&&"approve"===F.type,children:F.userId===e.id&&"approve"===F.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-1 h-3 w-3 animate-spin"}),"Menyimpan..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-1 h-3 w-3 text-white"}),"Setujui"]})}),(0,r.jsx)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-yellow-600 border-yellow-200 text-white hover:bg-yellow-100",onClick:()=>et("reject",e.id,e.name),disabled:F.userId===e.id&&"reject"===F.type,children:F.userId===e.id&&"reject"===F.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-1 h-3 w-3 animate-spin"}),"Menyimpan..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{className:"mr-1 h-3 w-3 text-white"}),"Tolak"]})})]}),"APPROVED"===e.status&&(0,r.jsx)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-blue-600 border-blue-200 text-white hover:bg-blue-100",onClick:()=>et("reset",e.id,e.name),disabled:F.userId===e.id&&"reset"===F.type,children:F.userId===e.id&&"reset"===F.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-1 h-3 w-3 animate-spin"}),"Menyimpan..."]}):(0,r.jsx)(r.Fragment,{children:"Reset Pass"})}),(0,r.jsx)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-red-600 border-red-200 text-white hover:bg-red-100",onClick:()=>et("delete",e.id,e.name),disabled:F.userId===e.id&&"delete"===F.type,children:F.userId===e.id&&"delete"===F.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-1 h-3 w-3 animate-spin"}),"Menyimpan..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{className:"mr-1 h-3 w-3 text-white"}),"Hapus"]})})]})]})},e.id))}),(0,r.jsx)(t.Zb,{className:"hidden lg:block",children:(0,r.jsxs)(t.aY,{children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(d.iA,{children:[(0,r.jsx)(d.xD,{children:(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.ss,{children:"NRP"}),(0,r.jsx)(d.ss,{children:"Nama"}),(0,r.jsx)(d.ss,{children:"Email"}),(0,r.jsx)(d.ss,{children:"Role"}),(0,r.jsx)(d.ss,{children:"Status"}),(0,r.jsx)(d.ss,{children:"Polres/Polda"}),(0,r.jsx)(d.ss,{children:"Tanggal Daftar"}),(0,r.jsx)(d.ss,{className:"w-[200px]",children:"Aksi"})]})}),(0,r.jsx)(d.RM,{children:0===e.length?(0,r.jsx)(d.SC,{children:(0,r.jsx)(d.pj,{colSpan:8,className:"text-center py-8 text-gray-500",children:"Tidak ada data pengguna"})}):e.map(e=>(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.pj,{className:"font-medium",children:e.nrp}),(0,r.jsx)(d.pj,{children:e.name}),(0,r.jsx)(d.pj,{children:e.email}),(0,r.jsx)(d.pj,{children:eh(e.role)}),(0,r.jsx)(d.pj,{children:eo(e.status)}),(0,r.jsx)(d.pj,{children:e.polres?(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("div",{className:"font-medium",children:e.polres.name}),(0,r.jsx)("div",{className:"text-gray-500 text-xs",children:e.polres.polda.name})]}):"-"}),(0,r.jsx)(d.pj,{children:new Date(e.createdAt).toLocaleDateString("id-ID")}),(0,r.jsx)(d.pj,{children:(0,r.jsxs)("div",{className:"flex gap-1",children:["PENDING"===e.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-green-600 border-green-200 text-white hover:bg-green-100",onClick:()=>et("approve",e.id,e.name),disabled:F.userId===e.id&&"approve"===F.type,children:F.userId===e.id&&"approve"===F.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-1 h-3 w-3 animate-spin"}),"Menyimpan..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-1 h-3 w-3 text-white"}),"Setujui"]})}),(0,r.jsx)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-yellow-600 border-yellow-200 text-white hover:bg-yellow-100",onClick:()=>et("reject",e.id,e.name),disabled:F.userId===e.id&&"reject"===F.type,children:F.userId===e.id&&"reject"===F.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-1 h-3 w-3 animate-spin"}),"Menyimpan..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{className:"mr-1 h-3 w-3 text-white"}),"Tolak"]})})]}),"APPROVED"===e.status&&(0,r.jsx)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-blue-600 border-blue-200 text-white hover:bg-blue-100",onClick:()=>et("reset",e.id,e.name),disabled:F.userId===e.id&&"reset"===F.type,children:F.userId===e.id&&"reset"===F.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-1 h-3 w-3 animate-spin"}),"Menyimpan..."]}):(0,r.jsx)(r.Fragment,{children:"Reset Pass"})}),(0,r.jsx)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-red-600 border-red-200 text-white hover:bg-red-100",onClick:()=>et("delete",e.id,e.name),disabled:F.userId===e.id&&"delete"===F.type,children:F.userId===e.id&&"delete"===F.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-1 h-3 w-3 animate-spin"}),"Menyimpan..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{className:"mr-1 h-3 w-3 text-white"}),"Hapus"]})})]})})]},e.id))})]})}),z.totalPages>1&&(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)(w.tl,{children:(0,r.jsxs)(w.ng,{children:[(0,r.jsx)(w.nt,{children:(0,r.jsx)(w.dN,{onClick:()=>ep(z.page-1),className:z.hasPrev?"cursor-pointer":"pointer-events-none opacity-50"})}),(()=>{let e=[],s=z.totalPages,a=z.page;if(e.push(1),s<=7)for(let a=2;a<=s;a++)e.push(a);else{a>3&&e.push("...");let r=Math.max(2,a-1),l=Math.min(s-1,a+1);for(let s=r;s<=l;s++)e.includes(s)||e.push(s);a<s-2&&e.push("..."),s>1&&e.push(s)}return e.map((e,s)=>(0,r.jsx)(w.nt,{children:"..."===e?(0,r.jsx)("span",{className:"px-3 py-2 text-gray-500",children:"..."}):(0,r.jsx)(w.kN,{onClick:()=>ep(e),isActive:e===a,className:"cursor-pointer",children:e})},s))})(),(0,r.jsx)(w.nt,{children:(0,r.jsx)(w.$0,{onClick:()=>ep(z.page+1),className:z.hasNext?"cursor-pointer":"pointer-events-none opacity-50"})})]})}),(0,r.jsxs)("div",{className:"text-center mt-4 text-sm text-gray-500",children:["Menampilkan ",(z.page-1)*O+1," - ",Math.min(z.page*O,z.total)," dari ",z.total," data"]})]})]})}),(0,r.jsx)(c.Vq,{open:_.isOpen,onOpenChange:ei,children:(0,r.jsxs)(c.cZ,{className:"sm:max-w-[425px]",children:[(0,r.jsx)(c.fK,{children:(0,r.jsx)(c.$N,{children:"approve"===_.type?"Setujui Pengguna":"reject"===_.type?"Tolak Pengguna":"reset"===_.type?"Reset Password":"Hapus Pengguna"})}),(0,r.jsx)("div",{className:"py-4",children:(0,r.jsx)("p",{className:"text-gray-600",children:"approve"===_.type?`Apakah Anda yakin ingin menyetujui pengguna "${_.userName}"?`:"reject"===_.type?`Apakah Anda yakin ingin menolak pengguna "${_.userName}"?`:"reset"===_.type?`Reset password untuk pengguna "${_.userName}"?`:`Apakah Anda yakin ingin menghapus pengguna "${_.userName}"?`})}),(0,r.jsxs)(c.cN,{children:[(0,r.jsx)(i.z,{variant:"outline",onClick:ei,children:"Batal"}),(0,r.jsx)(i.z,{onClick:en,variant:"delete"===_.type?"destructive":"default",disabled:null!==F.userId,children:null!==F.userId?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"approve"===_.type?"Menyetujui...":"reject"===_.type?"Menolak...":"reset"===_.type?"Mereset...":"Menghapus..."]}):(0,r.jsx)(r.Fragment,{children:"approve"===_.type?"Setujui":"reject"===_.type?"Tolak":"reset"===_.type?"Reset":"Hapus"})})]})]})})]})}},29280:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>m,Ph:()=>o,Ql:()=>j,i4:()=>p,ki:()=>h});var r=a(68819),l=a(17266),t=a(13326),i=a(941),n=a(96633),d=a(32933),c=a(51223);let o=t.fC;t.ZA;let h=t.B4,p=l.forwardRef(({className:e,children:s,...a},l)=>(0,r.jsxs)(t.xz,{ref:l,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,(0,r.jsx)(t.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=t.xz.displayName;let x=l.forwardRef(({className:e,...s},a)=>(0,r.jsx)(t.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})}));x.displayName=t.u_.displayName;let u=l.forwardRef(({className:e,...s},a)=>(0,r.jsx)(t.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})}));u.displayName=t.$G.displayName;let m=l.forwardRef(({className:e,children:s,position:a="popper",...l},i)=>(0,r.jsx)(t.h_,{children:(0,r.jsxs)(t.VY,{ref:i,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...l,children:[(0,r.jsx)(x,{}),(0,r.jsx)(t.l_,{className:(0,c.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(u,{})]})}));m.displayName=t.VY.displayName,l.forwardRef(({className:e,...s},a)=>(0,r.jsx)(t.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=t.__.displayName;let j=l.forwardRef(({className:e,children:s,...a},l)=>(0,r.jsxs)(t.ck,{ref:l,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(t.wU,{children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(t.eT,{children:s})]}));j.displayName=t.ck.displayName,l.forwardRef(({className:e,...s},a)=>(0,r.jsx)(t.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=t.Z0.displayName},36464:(e,s,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(s),a.d(s,{default:()=>e});var l=a(71851);let e=(await (0,l.createProxy)(String.raw`C:\Users\sulth\Documents\work\police-inventory\src\app\dashboard\users\page.tsx`)).default;r()}catch(e){r(e)}},1)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[3267,8075,9404,41,985,8545,5717,6221],()=>a(81475));module.exports=r})();