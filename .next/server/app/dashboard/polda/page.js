(()=>{var e={};e.id=2234,e.ids=[2234],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},66906:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>p,tree:()=>o});var t=s(3003),r=s(14293),l=s(66550),n=s.n(l),i=s(86979),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(a,d);let o=["",{children:["dashboard",{children:["polda",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4328)),"C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\dashboard\\polda\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,87563)),"C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,37973)),"C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,52075,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\dashboard\\polda\\page.tsx"],h={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/polda/page",pathname:"/dashboard/polda",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},88588:(e,a,s)=>{Promise.resolve().then(s.bind(s,68808))},12714:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},77506:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},83855:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},69508:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},68808:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>b});var t=s(68819),r=s(17266),l=s(35047),n=s(29752),i=s(91664),d=s(38443),o=s(41156),c=s(20968),h=s(41190),p=s(44794),m=s(83855),x=s(77506),u=s(88307),j=s(12714),g=s(69508),v=s(98091),y=s(84097),N=s(5523);function b(){let e=(0,l.useRouter)(),[a,s]=(0,r.useState)([]),[b,f]=(0,r.useState)(!0),[k,P]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),[_,S]=(0,r.useState)(!1),[D,M]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(null),[T,z]=(0,r.useState)({isOpen:!1,type:null,poldaId:null,poldaName:null}),[A,I]=(0,r.useState)({page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1}),[q,O]=(0,r.useState)(10),[G,$]=(0,r.useState)(""),[F,B]=(0,r.useState)({name:"",address:"",phone:""}),{toast:K}=(0,y.pm)(),R=async()=>{try{let e=new URLSearchParams({page:A.page.toString(),limit:q.toString(),...G&&{search:G}}),a=await fetch(`/api/polda?${e}`),t=await a.json();t.poldas?(s(t.poldas),I(t.pagination)):(s(t),I({page:1,limit:q,total:t.length,totalPages:Math.ceil(t.length/q),hasNext:!1,hasPrev:!1}))}catch(e){console.error("Error fetching poldas:",e),K({variant:"destructive",title:"Error",description:"Gagal memuat data Polda"})}finally{f(!1)}},U=async e=>{e.preventDefault(),C(!0);try{let e=await fetch("/api/polda",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(e.ok)P(!1),B({name:"",address:"",phone:""}),R(),K({variant:"success",title:"Berhasil!",description:"Polda baru berhasil ditambahkan"});else{let a=await e.json();K({variant:"destructive",title:"Error",description:a.message||"Gagal menambahkan Polda"})}}catch(e){console.error("Error creating polda:",e),K({variant:"destructive",title:"Error",description:"Terjadi kesalahan saat menambah Polda"})}finally{C(!1)}},H=(e,a,s)=>{z({isOpen:!0,type:e,poldaId:a,poldaName:s})},L=()=>{z({isOpen:!1,type:null,poldaId:null,poldaName:null})},V=async()=>{T.poldaId&&T.type&&("delete"===T.type&&await J(T.poldaId),L())},J=async e=>{try{console.log("Deleting polda:",e);let a=await fetch(`/api/polda/${e}`,{method:"DELETE"});if(console.log("Response status:",a.status),a.ok)R(),K({variant:"success",title:"Berhasil!",description:"Polda berhasil dihapus"});else{let e=await a.json();console.error("Delete failed:",e),K({variant:"destructive",title:"Error",description:e.error||"Gagal menghapus Polda"})}}catch(e){console.error("Error deleting polda:",e),K({variant:"destructive",title:"Error",description:"Gagal menghapus Polda"})}},Y=e=>{I(a=>({...a,page:e}))},W=e=>{$(e),I(e=>({...e,page:1}))},X=a=>{e.push(`/dashboard/polda/${a}`)},Q=async(e,a)=>{try{let a=await fetch(`/api/polda/${e}`);if(a.ok){let e=await a.json();Z(e),B({name:e.name,address:e.address||"",phone:e.phone||""}),S(!0)}else K({variant:"destructive",title:"Error",description:"Gagal memuat data Polda"})}catch(e){console.error("Error fetching polda for edit:",e),K({variant:"destructive",title:"Error",description:"Gagal memuat data Polda"})}},ee=async e=>{if(e.preventDefault(),E){C(!0);try{let e=await fetch(`/api/polda/${E.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(e.ok)S(!1),B({name:"",address:"",phone:""}),Z(null),R(),K({variant:"success",title:"Berhasil!",description:"Polda berhasil diperbarui"});else{let a=await e.json();K({variant:"destructive",title:"Error",description:a.message||"Gagal memperbarui Polda"})}}catch(e){console.error("Error updating polda:",e),K({variant:"destructive",title:"Error",description:"Terjadi kesalahan saat memperbarui Polda"})}finally{C(!1)}}};return b?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-lg",children:"Memuat data Polda..."})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Manajemen Polda"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Kelola data Kepolisian Daerah"})]}),(0,t.jsxs)(c.Vq,{open:k,onOpenChange:P,children:[(0,t.jsx)(c.hg,{asChild:!0,children:(0,t.jsxs)(i.z,{children:[(0,t.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Tambah Polda"]})}),(0,t.jsxs)(c.cZ,{className:"sm:max-w-[425px]",children:[(0,t.jsx)(c.fK,{children:(0,t.jsx)(c.$N,{children:"Tambah Polda Baru"})}),(0,t.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"name",children:"Nama Polda"}),(0,t.jsx)(h.I,{id:"name",value:F.name,onChange:e=>B({...F,name:e.target.value}),placeholder:"Masukkan nama Polda",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"address",children:"Alamat"}),(0,t.jsx)(h.I,{id:"address",value:F.address,onChange:e=>B({...F,address:e.target.value}),placeholder:"Masukkan alamat Polda"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"phone",children:"Nomor Telepon"}),(0,t.jsx)(h.I,{id:"phone",value:F.phone,onChange:e=>B({...F,phone:e.target.value}),placeholder:"Masukkan nomor telepon"})]}),(0,t.jsxs)(c.cN,{children:[(0,t.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>P(!1),children:"Batal"}),(0,t.jsx)(i.z,{type:"submit",disabled:w,children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):"Simpan"})]})]})]})]})]}),(0,t.jsx)(n.Zb,{children:(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"search",children:"Cari"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)(h.I,{id:"search",placeholder:"Cari nama, alamat, atau nomor telepon...",value:G,onChange:e=>W(e.target.value),className:"pl-10"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{children:"Total Data"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:A.total})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"pageSize",children:"Data per Halaman"}),(0,t.jsxs)("select",{id:"pageSize",value:q,onChange:e=>{O(parseInt(e.target.value)),I(e=>({...e,page:1}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:5,children:"5 data"}),(0,t.jsx)("option",{value:10,children:"10 data"}),(0,t.jsx)("option",{value:20,children:"20 data"}),(0,t.jsx)("option",{value:50,children:"50 data"})]})]})]})})}),(0,t.jsx)(n.Zb,{children:(0,t.jsxs)(n.aY,{children:[(0,t.jsxs)(o.iA,{children:[(0,t.jsx)(o.xD,{children:(0,t.jsxs)(o.SC,{children:[(0,t.jsx)(o.ss,{children:"Nama Polda"}),(0,t.jsx)(o.ss,{children:"Jumlah Polres"}),(0,t.jsx)(o.ss,{children:"Alamat"}),(0,t.jsx)(o.ss,{children:"Nomor Telepon"}),(0,t.jsx)(o.ss,{className:"w-[150px]",children:"Aksi"})]})}),(0,t.jsx)(o.RM,{children:0===a.length?(0,t.jsx)(o.SC,{children:(0,t.jsx)(o.pj,{colSpan:5,className:"text-center py-8 text-gray-500",children:"Tidak ada data Polda"})}):a.map(e=>(0,t.jsxs)(o.SC,{children:[(0,t.jsx)(o.pj,{className:"font-medium",children:e.name}),(0,t.jsx)(o.pj,{children:(0,t.jsxs)(d.C,{variant:"secondary",children:[e._count.polres," Polres"]})}),(0,t.jsx)(o.pj,{children:e.address?e.address.length>30?`${e.address.substring(0,30)}...`:e.address:(0,t.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,t.jsx)(o.pj,{children:e.phone||(0,t.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,t.jsx)(o.pj,{children:(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsxs)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-blue-600 border-blue-200 text-white hover:bg-blue-100 transition-all duration-200 hover:scale-105",onClick:()=>X(e.id),children:[(0,t.jsx)(j.Z,{className:"mr-1 h-3 w-3"}),"Detail"]}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-green-600 border-green-200 text-white hover:bg-green-100 transition-all duration-200 hover:scale-105",onClick:()=>Q(e.id,e.name),children:[(0,t.jsx)(g.Z,{className:"mr-1 h-3 w-3"}),"Edit"]}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-red-600 border-red-200 text-white hover:bg-red-100 transition-all duration-200 hover:scale-105",onClick:()=>H("delete",e.id,e.name),children:[(0,t.jsx)(v.Z,{className:"mr-1 h-3 w-3"}),"Hapus"]})]})})]},e.id))})]}),A.totalPages>1&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)(N.tl,{children:(0,t.jsxs)(N.ng,{children:[(0,t.jsx)(N.nt,{children:(0,t.jsx)(N.dN,{onClick:()=>Y(A.page-1),className:A.hasPrev?"cursor-pointer":"pointer-events-none opacity-50"})}),(()=>{let e=[],a=A.totalPages,s=A.page;if(e.push(1),a<=7)for(let s=2;s<=a;s++)e.push(s);else{s>3&&e.push("...");let t=Math.max(2,s-1),r=Math.min(a-1,s+1);for(let a=t;a<=r;a++)e.includes(a)||e.push(a);s<a-2&&e.push("..."),a>1&&e.push(a)}return e.map((e,a)=>(0,t.jsx)(N.nt,{children:"..."===e?(0,t.jsx)("span",{className:"px-3 py-2 text-gray-500",children:"..."}):(0,t.jsx)(N.kN,{onClick:()=>Y(e),isActive:e===s,className:"cursor-pointer",children:e})},a))})(),(0,t.jsx)(N.nt,{children:(0,t.jsx)(N.$0,{onClick:()=>Y(A.page+1),className:A.hasNext?"cursor-pointer":"pointer-events-none opacity-50"})})]})}),(0,t.jsxs)("div",{className:"text-center mt-4 text-sm text-gray-500",children:["Menampilkan ",(A.page-1)*q+1," - ",Math.min(A.page*q,A.total)," dari ",A.total," data"]})]})]})}),(0,t.jsx)(c.Vq,{open:T.isOpen,onOpenChange:L,children:(0,t.jsxs)(c.cZ,{className:"sm:max-w-[425px]",children:[(0,t.jsx)(c.fK,{children:(0,t.jsx)(c.$N,{children:"Hapus Polda"})}),(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:['Apakah Anda yakin ingin menghapus Polda "',T.poldaName,'"?']}),(0,t.jsx)("p",{className:"text-sm text-red-600 mt-2",children:"Tindakan ini tidak dapat dibatalkan dan akan menghapus semua data terkait."})]}),(0,t.jsxs)(c.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:L,children:"Batal"}),(0,t.jsx)(i.z,{onClick:V,variant:"destructive",children:"Hapus"})]})]})}),(0,t.jsx)(c.Vq,{open:D,onOpenChange:M,children:(0,t.jsxs)(c.cZ,{className:"sm:max-w-[600px]",children:[(0,t.jsx)(c.fK,{children:(0,t.jsx)(c.$N,{children:"Detail Polda"})}),E&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{className:"font-semibold",children:"Nama Polda"}),(0,t.jsx)("p",{className:"text-gray-700",children:E.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{className:"font-semibold",children:"Jumlah Polres"}),(0,t.jsxs)(d.C,{variant:"secondary",children:[E._count.polres," Polres"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{className:"font-semibold",children:"Alamat"}),(0,t.jsx)("p",{className:"text-gray-700",children:E.address||"-"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{className:"font-semibold",children:"Nomor Telepon"}),(0,t.jsx)("p",{className:"text-gray-700",children:E.phone||"-"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{className:"font-semibold",children:"Tanggal Dibuat"}),(0,t.jsx)("p",{className:"text-gray-700",children:new Date(E.createdAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{className:"font-semibold",children:"Terakhir Update"}),(0,t.jsx)("p",{className:"text-gray-700",children:new Date(E.updatedAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{className:"font-semibold",children:"ID Polda"}),(0,t.jsx)("p",{className:"text-gray-700 text-sm font-mono",children:E.id})]})]}),(0,t.jsx)(c.cN,{children:(0,t.jsx)(i.z,{variant:"outline",onClick:()=>M(!1),children:"Tutup"})})]})}),(0,t.jsx)(c.Vq,{open:_,onOpenChange:S,children:(0,t.jsxs)(c.cZ,{className:"sm:max-w-[425px]",children:[(0,t.jsx)(c.fK,{children:(0,t.jsx)(c.$N,{children:"Edit Polda"})}),(0,t.jsxs)("form",{onSubmit:ee,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"edit-name",children:"Nama Polda"}),(0,t.jsx)(h.I,{id:"edit-name",value:F.name,onChange:e=>B({...F,name:e.target.value}),placeholder:"Masukkan nama Polda",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"edit-address",children:"Alamat"}),(0,t.jsx)(h.I,{id:"edit-address",value:F.address,onChange:e=>B({...F,address:e.target.value}),placeholder:"Masukkan alamat Polda"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"edit-phone",children:"Nomor Telepon"}),(0,t.jsx)(h.I,{id:"edit-phone",value:F.phone,onChange:e=>B({...F,phone:e.target.value}),placeholder:"Masukkan nomor telepon"})]}),(0,t.jsxs)(c.cN,{children:[(0,t.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>S(!1),children:"Batal"}),(0,t.jsx)(i.z,{type:"submit",disabled:w,children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):"Simpan Perubahan"})]})]})]})})]})}},4328:(e,a,s)=>{"use strict";s.a(e,async(e,t)=>{try{s.r(a),s.d(a,{default:()=>e});var r=s(71851);let e=(await (0,r.createProxy)(String.raw`C:\Users\sulth\Documents\work\police-inventory\src\app\dashboard\polda\page.tsx`)).default;t()}catch(e){t(e)}},1)},34478:(e,a,s)=>{"use strict";s.d(a,{f:()=>i});var t=s(17266),r=s(45226),l=s(68819),n=t.forwardRef((e,a)=>(0,l.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));n.displayName="Label";var i=n}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[3267,8075,9404,41,985,5717,6221],()=>s(66906));module.exports=t})();