(()=>{var e={};e.id=2e3,e.ids=[2e3],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},81103:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>c,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{GET:()=>u,POST:()=>d});var a=r(52412),o=r(14293),n=r(94147),i=r(77856),p=r(47726);async function u(e){try{let{searchParams:t}=new URL(e.url),r=parseInt(t.get("page")||"1"),s=parseInt(t.get("limit")||"10"),a=t.get("search")||"",o=(r-1)*s,n=a?{OR:[{name:{contains:a}},{address:{contains:a}},{phone:{contains:a}}]}:{},u=await p._.polda.count({where:n}),d=await p._.polda.findMany({where:n,include:{_count:{select:{polres:!0}}},orderBy:{createdAt:"desc"},skip:o,take:s}),c=Math.ceil(u/s);return i.NextResponse.json({poldas:d,pagination:{page:r,limit:s,total:u,totalPages:c,hasNext:r<c,hasPrev:r>1}})}catch(e){return console.error("Error fetching poldas:",e),i.NextResponse.json({error:"Failed to fetch poldas"},{status:500})}}async function d(e){try{let{name:t,address:r,phone:s}=await e.json();if(!t)return i.NextResponse.json({error:"Nama Polda harus diisi"},{status:400});if(await p._.polda.findFirst({where:{name:t}}))return i.NextResponse.json({error:"Polda dengan nama tersebut sudah ada"},{status:400});let a=await p._.polda.create({data:{name:t,address:r,phone:s},include:{_count:{select:{polres:!0}}}});return i.NextResponse.json(a,{status:201})}catch(e){return console.error("Error creating polda:",e),i.NextResponse.json({error:"Failed to create polda"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/polda/route",pathname:"/api/polda",filename:"route",bundlePath:"app/api/polda/route"},resolvedPagePath:"C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\api\\polda\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:x,serverHooks:h}=c;function m(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:x})}},35303:()=>{},47726:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var s=r(53524);let a=globalThis.prisma??new s.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[3267,8814],()=>r(81103));module.exports=s})();