(()=>{var e={};e.id=2e3,e.ids=[2e3],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},20307:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>h,serverHooks:()=>f,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>w});var a={};r.r(a),r.d(a,{GET:()=>x,POST:()=>m,dynamic:()=>d,maxDuration:()=>l,preferredRegion:()=>c,runtime:()=>u});var s=r(52412),o=r(14293),n=r(94147),i=r(77856),p=r(47726);let u="nodejs",d="force-dynamic",c="auto",l=30;async function x(e){try{let{searchParams:t}=new URL(e.url),r=parseInt(t.get("page")||"1"),a=parseInt(t.get("limit")||"10"),s=t.get("search")||"",o=(r-1)*a,n=s?{OR:[{name:{contains:s}},{address:{contains:s}},{phone:{contains:s}}]}:{},u=await p._.polda.count({where:n}),d=await p._.polda.findMany({where:n,include:{_count:{select:{polres:!0}}},orderBy:{createdAt:"desc"},skip:o,take:a}),c=Math.ceil(u/a);return i.NextResponse.json({poldas:d,pagination:{page:r,limit:a,total:u,totalPages:c,hasNext:r<c,hasPrev:r>1}})}catch(e){return console.error("Error fetching poldas:",e),i.NextResponse.json({error:"Failed to fetch poldas"},{status:500})}}async function m(e){try{let{name:t,address:r,phone:a}=await e.json();if(!t)return i.NextResponse.json({error:"Nama Polda harus diisi"},{status:400});if(await p._.polda.findFirst({where:{name:t}}))return i.NextResponse.json({error:"Polda dengan nama tersebut sudah ada"},{status:400});let s=await p._.polda.create({data:{name:t,address:r,phone:a},include:{_count:{select:{polres:!0}}}});return i.NextResponse.json(s,{status:201})}catch(e){return console.error("Error creating polda:",e),i.NextResponse.json({error:"Failed to create polda"},{status:500})}}let h=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/polda/route",pathname:"/api/polda",filename:"route",bundlePath:"app/api/polda/route"},resolvedPagePath:"C:\\Users\\sulth\\Documents\\work\\police-inventory\\src\\app\\api\\polda\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:g,workUnitAsyncStorage:w,serverHooks:f}=h;function v(){return(0,n.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:w})}},35303:()=>{},47726:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});var a=r(53524);let s=globalThis.prisma??new a.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[3267,8814],()=>r(20307));module.exports=a})();